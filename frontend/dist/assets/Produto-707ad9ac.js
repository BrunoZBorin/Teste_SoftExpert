import{D as f,M as y,a as n}from"./DebouncedCurrencyInput-348e24f6.js";import{_ as v,r as P,o as d,c as a,a as t,w as p,v as b,b as M,F as m,d as h,e as C,t as c}from"./index-d78af730.js";const D={components:{DebouncedCurrencyInput:f},data(){return{colunas:["Código","Descrição","Valor"],produtos:[],produtoSelecionado:{},produtoModal:{id_produto:"",descricao:"",valor:0,cod_tipo:0},tipos:[],myModal:null}},mounted(){this.carregaProdutos(),this.myModal=new y(document.getElementById("cadastroProduto"),{keyboard:!1}),this.carregaTipos()},methods:{cliqueProduto(r,o){var u=document.getElementsByTagName("tr");Array.prototype.forEach.call(u,function(i){i.classList.remove("selected")}),r.target.parentNode.classList.add("selected"),this.produtoSelecionado=o},carregaProdutos(){var r=document.getElementsByTagName("tr");Array.prototype.forEach.call(r,function(o){o.classList.remove("selected")}),this.produtoSelecionado={},n.get("http://localhost:8000/produtos").then(o=>{this.produtos=o.data}).catch(o=>{console.log(o)})},carregaTipos(){n.get("http://localhost:8000/tipos").then(r=>{this.tipos=r.data}).catch(r=>{console.log(r)})},abrirAlterarProduto(){if(Object.keys(this.produtoSelecionado).length===0){alert("Selecione um produto!");return}this.produtoModal=Object.assign({},this.produtoSelecionado),this.myModal.show()},abrirIncluirProduto(){this.produtoModal={id_produto:"",descricao:"",valor:0,cod_tipo:0},this.myModal.show()},alterarProduto(){let r=this.validaCamposProduto(this.produtoModal.descricao,this.produtoModal.cod_tipo,this.produtoModal.valor);if(r!=""){alert(r);return}n.put("http://localhost:8000/produtos",this.produtoModal).then(o=>{this.myModal.hide(),alert("Produto alterado com sucesso!"),this.carregaProdutos()}).catch(o=>{console.log(o)})},validaCamposProduto(r,o,u){let i="";return r.trim()==""?i="Informe um descrição.":o>0?(!(u>0)||u==null||u=="")&&(i="Informe um valor."):i="Informe um tipo.",i},incluirProduto(){let r=this.validaCamposProduto(this.produtoModal.descricao,this.produtoModal.cod_tipo,this.produtoModal.valor);if(r!=""){alert(r);return}n.post("http://localhost:8000/produtos",this.produtoModal).then(o=>{this.myModal.hide(),alert("Produto incluido com sucesso!"),this.carregaProdutos()}).catch(o=>{console.log(o)})},excluirProduto(){if(Object.keys(this.produtoSelecionado).length===0){alert("Selecione um produto!");return}n.delete("http://localhost:8000/produtos",{params:{id:this.produtoSelecionado.id_produto}}).then(r=>{this.myModal.hide(),alert("Produto excluído com sucesso!"),this.carregaProdutos()}).catch(r=>{console.log(r)})},formatarValor(r){return Number(r).toLocaleString("pt-br",{maximumFractionDigits:2,minimumFractionDigits:2})}}},k={class:"produto"},x={class:"modal fade",id:"cadastroProduto","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"cadastroProdutoLabel","aria-hidden":"true"},S={class:"modal-dialog"},V={class:"modal-content"},I=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"cadastroProdutoLabel"},"Cadastro Produto"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),F={class:"modal-body"},L={class:"row"},T={class:"col-12"},B=t("label",{for:"inputCodigo"},"Código",-1),E={class:"col-12"},N=t("label",{for:"inputDescricao"},"Descrição",-1),w={class:"col-12"},A=t("label",{for:"selectTipo"},"Tipo",-1),O=t("option",{value:"0",selected:""},null,-1),U=["value"],j={class:"col-12"},q=t("label",{for:"inputValor"},"Valor",-1),G={class:"modal-footer"},R=t("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal"},"Cancelar",-1),z=t("h3",null,"Produtos",-1),H={class:"table table-default border"},J={scope:"col"},K=["onClick"];function Q(r,o,u,i,s,l){const _=P("DebouncedCurrencyInput");return d(),a("div",k,[t("div",x,[t("div",S,[t("div",V,[I,t("div",F,[t("div",L,[t("div",T,[B,p(t("input",{id:"inputCodigo",type:"text",class:"form-control","onUpdate:modelValue":o[0]||(o[0]=e=>s.produtoModal.id_produto=e),disabled:""},null,512),[[b,s.produtoModal.id_produto]])]),t("div",E,[N,p(t("input",{id:"inputDescricao",type:"text",class:"form-control","onUpdate:modelValue":o[1]||(o[1]=e=>s.produtoModal.descricao=e)},null,512),[[b,s.produtoModal.descricao]])]),t("div",w,[A,p(t("select",{id:"selectTipo",class:"form-select","onUpdate:modelValue":o[2]||(o[2]=e=>s.produtoModal.cod_tipo=e)},[O,(d(!0),a(m,null,h(s.tipos,e=>(d(),a("option",{value:e.id_tipo},c(e.descricao),9,U))),256))],512),[[M,s.produtoModal.cod_tipo]])]),t("div",j,[q,C(_,{id:"inputValor",class:"form-control",modelValue:s.produtoModal.valor,"onUpdate:modelValue":o[3]||(o[3]=e=>s.produtoModal.valor=e),value:s.produtoModal.valor,options:{currency:"BRL",currencyDisplay:"hidden",valueRange:{max:999999},precision:2,hideCurrencySymbolOnFocus:!1,hideGroupingSeparatorOnFocus:!1,hideNegligibleDecimalDigitsOnFocus:!1,autoDecimalDigits:!0,useGrouping:!0,accountingSign:!1}},null,8,["modelValue","value"])])])]),t("div",G,[R,s.produtoModal.id_produto>0?(d(),a("button",{key:0,onClick:o[4]||(o[4]=(...e)=>l.alterarProduto&&l.alterarProduto(...e)),type:"button",class:"btn btn-success"},"Confirmar")):(d(),a("button",{key:1,type:"button",onClick:o[5]||(o[5]=(...e)=>l.incluirProduto&&l.incluirProduto(...e)),class:"btn btn-success"},"Confirmar"))])])])]),z,t("table",H,[t("thead",null,[t("tr",null,[(d(!0),a(m,null,h(s.colunas,e=>(d(),a("th",J,c(e),1))),256))])]),t("tbody",null,[(d(!0),a(m,null,h(s.produtos,e=>(d(),a("tr",{onClick:g=>l.cliqueProduto(g,e)},[t("td",null,c(e.id_produto),1),t("td",null,c(e.descricao),1),t("td",null,c(l.formatarValor(e.valor)),1)],8,K))),256))])]),t("button",{onClick:o[6]||(o[6]=(...e)=>l.abrirIncluirProduto&&l.abrirIncluirProduto(...e)),type:"button",class:"btn btn-success me-3"}," Incluir "),t("button",{onClick:o[7]||(o[7]=(...e)=>l.abrirAlterarProduto&&l.abrirAlterarProduto(...e)),type:"button",class:"btn btn-primary me-3"}," Alterar "),t("button",{onClick:o[8]||(o[8]=(...e)=>l.excluirProduto&&l.excluirProduto(...e)),type:"button",class:"btn btn-danger"}," Excluir ")])}const Y=v(D,[["render",Q]]);export{Y as default};
